<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Êæ≥ÈñÄÂ•¢ËèØ‰ºëÈñí‰πãÊóÖ</title>
    
    <!-- === ÊâãÊ©ü‰∏ªÁï´Èù¢ App ÂúñÁ§∫Ë®≠ÂÆö === -->
    <link rel="apple-touch-icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/W_Hotels_logo.svg/1024px-W_Hotels_logo.svg.png">
    <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/W_Hotels_logo.svg/1024px-W_Hotels_logo.svg.png">
    <link rel="manifest" href="manifest.json">   
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Êæ≥ÈñÄÂä©ÊîªÁéã">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#020617">

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fade-in-up 0.4s ease-out forwards; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        body { background-color: #020617; -webkit-tap-highlight-color: transparent; }
        
        .glow-gold {
            box-shadow: 0 0 20px rgba(234, 179, 8, 0.25);
            border-color: rgba(234, 179, 8, 0.5) !important;
        }

        .playing-card {
            width: 60px;
            height: 85px;
            border-radius: 10px;
            background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
            color: black;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: 900;
            font-size: 1.2rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(255,255,255,0.8);
        }

        .five-card-charlie {
            background: linear-gradient(to right, #f59e0b, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        const Icon = ({ name, size = 16, className = "" }) => {
            const containerRef = useRef(null);
            useEffect(() => {
                if (window.lucide && containerRef.current) {
                    containerRef.current.innerHTML = `<i data-lucide="${name}"></i>`;
                    window.lucide.createIcons({
                        root: containerRef.current,
                        attrs: { width: size, height: size, class: className, 'stroke-width': 2.5 }
                    });
                }
            }, [name, size, className]);
            return <span key={name} ref={containerRef} className="inline-flex items-center justify-center"></span>;
        };

        const BlackjackGame = () => {
            const [chips, setChips] = useState(1000);
            const [currentBet, setCurrentBet] = useState(0);
            const [deck, setDeck] = useState([]);
            const [playerHand, setPlayerHand] = useState([]);
            const [dealerHand, setDealerHand] = useState([]);
            const [gameState, setGameState] = useState('idle'); // idle, playing, dealer_turn, ended, bankrupt
            const [message, setMessage] = useState('Ê∫ñÂÇôÂ•Ω‰∫ÜÂóéÔºüÊØèÊ≥® 10 ÂÖÉÔºåÂ∞èË≥≠ÊÄ°ÊÉÖ„ÄÇ');
            const [advice, setAdvice] = useState('');

            const initDeck = () => {
                const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
                const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
                let newDeck = [];
                for (let s of suits) { for (let v of values) { newDeck.push({ suit: s, value: v }); } }
                return newDeck.sort(() => Math.random() - 0.5);
            };

            const calculateScore = (hand) => {
                let score = 0;
                let aces = 0;
                for (let card of hand) {
                    if (card.value === 'A') { aces += 1; score += 11; }
                    else if (['J', 'Q', 'K'].includes(card.value)) { score += 10; }
                    else { score += parseInt(card.value); }
                }
                while (score > 21 && aces > 0) { score -= 10; aces -= 1; }
                return score;
            };

            const getStrategyAdvice = (pHand, dHand) => {
                if (gameState !== 'playing' || pHand.length < 2) return "";
                const pScore = calculateScore(pHand);
                const dCardValue = dHand[0].value;
                let dScore = 0;
                if (dCardValue === 'A') dScore = 11;
                else if (['J', 'Q', 'K'].includes(dCardValue)) dScore = 10;
                else dScore = parseInt(dCardValue);
                if (pHand.length === 4 && pScore <= 16) return "Âª∫Ë≠∞ÔºöË°ù„Äå‰∫îÂ∞èÈæç„ÄçÔºÅÂãùÁéáÈ´ò„ÄÇ";
                const hasAce = pHand.some(c => c.value === 'A') && (pScore <= 21);
                const isSoft = hasAce && (pHand.reduce((acc, c) => acc + (['J','Q','K'].includes(c.value)?10:(c.value==='A'?1:parseInt(c.value))), 0) + 10 <= 21);
                if (isSoft) {
                    if (pScore <= 14) return dScore >= 5 && dScore <= 6 ? "Âª∫Ë≠∞ÔºöÂä†ÂÄç (Double)" : "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                    if (pScore <= 16) return dScore >= 4 && dScore <= 6 ? "Âª∫Ë≠∞ÔºöÂä†ÂÄç (Double)" : "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                    if (pScore === 17) return dScore >= 3 && dScore <= 6 ? "Âª∫Ë≠∞ÔºöÂä†ÂÄç (Double)" : "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                    if (pScore === 18) {
                        if (dScore <= 6) return "Âª∫Ë≠∞ÔºöÂä†ÂÄç (Double)";
                        if (dScore >= 9) return "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                        return "Âª∫Ë≠∞ÔºöÂÅúÁâå (Stand)";
                    }
                    return "Âª∫Ë≠∞ÔºöÂÅúÁâå (Stand)";
                } else {
                    if (pScore <= 8) return "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                    if (pScore === 9) return dScore >= 3 && dScore <= 6 ? "Âª∫Ë≠∞ÔºöÂä†ÂÄç (Double)" : "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                    if (pScore === 10) return dScore <= 9 ? "Âª∫Ë≠∞ÔºöÂä†ÂÄç (Double)" : "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                    if (pScore === 11) return "Âª∫Ë≠∞ÔºöÂä†ÂÄç (Double)";
                    if (pScore === 12) return dScore >= 4 && dScore <= 6 ? "Âª∫Ë≠∞ÔºöÂÅúÁâå (Stand)" : "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                    if (pScore >= 13 && pScore <= 16) return dScore <= 6 ? "Âª∫Ë≠∞ÔºöÂÅúÁâå (Stand)" : "Âª∫Ë≠∞ÔºöË¶ÅÁâå (Hit)";
                    return "Âª∫Ë≠∞ÔºöÂÅúÁâå (Stand)";
                }
            };

            const startGame = () => {
                if (chips < 10) {
                    setGameState('bankrupt');
                    setMessage('Á±åÁ¢ºÂ∑≤Á©∫ÔºåË´ãÊó©Êó©Áù°„ÄÇ‰∏ãÊ¨°ÂÜç‰æÜÔºÅ');
                    return;
                }
                const newDeck = initDeck();
                const p1 = newDeck.pop(); const d1 = newDeck.pop();
                const p2 = newDeck.pop(); const d2 = newDeck.pop();
                setChips(prev => prev - 10);
                setCurrentBet(10);
                setDeck(newDeck); setPlayerHand([p1, p2]); setDealerHand([d1, d2]);
                setGameState('playing'); setMessage('‰Ω†ÁöÑÂõûÂêàÔºÅË´ãÂÅöÂá∫Ê±∫ÂÆö„ÄÇ');
            };

            const hit = () => {
                const newDeck = [...deck];
                const card = newDeck.pop();
                const newHand = [...playerHand, card];
                const newScore = calculateScore(newHand);
                setDeck(newDeck); setPlayerHand(newHand);
                if (newHand.length === 5 && newScore <= 21) {
                    setGameState('ended');
                    setMessage('üéâ ‰∫îÂ∞èÈæçÔºÅ‰Ω†Ë¥è‰∫ÜÔºÅ');
                    setChips(prev => prev + currentBet * 2);
                    return;
                }
                if (newScore > 21) { setGameState('ended'); setMessage('ÁàÜÁâå (Bust)ÔºÅËéäÂÆ∂Áç≤Âãù„ÄÇ'); }
            };

            const doubleDown = () => {
                if (chips < currentBet) {
                    setMessage('Á±åÁ¢º‰∏çË∂≥‰ª•Âä†ÂÄçÔºÅ');
                    return;
                }
                setChips(prev => prev - currentBet);
                const updatedBet = currentBet * 2;
                setCurrentBet(updatedBet);
                const newDeck = [...deck];
                const card = newDeck.pop();
                const newHand = [...playerHand, card];
                setDeck(newDeck); setPlayerHand(newHand);
                if (calculateScore(newHand) > 21) {
                    setGameState('ended'); setMessage('Âä†ÂÄçÂæåÁàÜÁâåÔºÅËéäÂÆ∂Áç≤Âãù„ÄÇ');
                } else {
                    standWithHand(newHand, newDeck, updatedBet);
                }
            };

            const stand = () => standWithHand(playerHand, deck, currentBet);

            const standWithHand = (pHand, currentDeck, betAmount) => {
                setGameState('dealer_turn');
                let cDealerHand = [...dealerHand];
                let cDeck = [...currentDeck];
                const dealerInterval = setInterval(() => {
                    const score = calculateScore(cDealerHand);
                    if (score < 17) {
                        const card = cDeck.pop();
                        cDealerHand.push(card);
                        setDealerHand([...cDealerHand]);
                    } else {
                        clearInterval(dealerInterval);
                        const dScore = calculateScore(cDealerHand);
                        const pScore = calculateScore(pHand);
                        setGameState('ended');
                        if (dScore > 21) {
                            setMessage('ËéäÂÆ∂ÁàÜÁâåÔºÅ‰Ω†Ë¥è‰∫ÜÔºÅ');
                            setChips(prev => prev + betAmount * 2);
                        } else if (dScore > pScore) {
                            setMessage('ËéäÂÆ∂Áç≤ÂãùÔºåÂÜçÊé•ÂÜçÂé≤ÔºÅ');
                        } else if (dScore < pScore) {
                            setMessage('ÊÅ≠ÂñúÔºÅ‰Ω†ÊìäÊïó‰∫ÜËéäÂÆ∂ÔºÅ');
                            setChips(prev => prev + betAmount * 2);
                        } else {
                            setMessage('ÈõôÊñπÂπ≥Êâã (Push)ÔºÅ');
                            setChips(prev => prev + betAmount);
                        }
                    }
                }, 700);
            };

            const resetSession = () => {
                setChips(1000);
                setGameState('idle');
                setMessage('Ê∫ñÂÇôÂ•Ω‰∫ÜÂóéÔºüÊØèÊ≥® 10 ÂÖÉÔºåÂ∞èË≥≠ÊÄ°ÊÉÖ„ÄÇ');
                setPlayerHand([]);
                setDealerHand([]);
            };

            useEffect(() => {
                if (gameState === 'playing') setAdvice(getStrategyAdvice(playerHand, dealerHand));
                else setAdvice('');
            }, [playerHand, gameState]);

            return (
                <div className="space-y-5 animate-fade-in-up pb-10">
                    {/* Á±åÁ¢ºÁãÄÊÖãÊ¨Ñ */}
                    <div className="flex justify-between items-center bg-slate-800/80 p-4 rounded-2xl border border-yellow-500/30">
                        <div className="flex items-center gap-2">
                            <div className="bg-yellow-500/20 p-2 rounded-lg"><Icon name="database" className="text-yellow-500" size={16} /></div>
                            <div>
                                <p className="text-[10px] text-slate-400 font-bold uppercase">Balance</p>
                                <p className="text-lg font-black text-white">${chips}</p>
                            </div>
                        </div>
                        <div className="text-right">
                            <p className="text-[10px] text-slate-400 font-bold uppercase">Current Bet</p>
                            <p className="text-lg font-black text-yellow-500">${currentBet}</p>
                        </div>
                    </div>

                    <div className="bg-slate-800/60 p-5 rounded-[2rem] border border-white/5 shadow-2xl backdrop-blur-md">
                        {/* ËéäÂÆ∂ */}
                        <div className="mb-4">
                            <div className="flex justify-between items-center mb-3 px-2">
                                <span className="text-[9px] font-black text-slate-500 uppercase">Dealer's Hand</span>
                                <span className="text-[10px] font-bold text-slate-400">{gameState === 'ended' ? `Score: ${calculateScore(dealerHand)}` : 'Score: ?'}</span>
                            </div>
                            <div className="flex justify-center gap-2">
                                {dealerHand.map((card, i) => (
                                    <div key={i} className={`playing-card ${(card.suit === '‚ô•' || card.suit === '‚ô¶') ? 'text-rose-600' : 'text-slate-900'}`}>
                                        {gameState === 'playing' && i === 1 ? <Icon name="lock" size={24} className="text-slate-300" /> : `${card.value}${card.suit}`}
                                    </div>
                                ))}
                                {dealerHand.length === 0 && [1,2].map(i => <div key={i} className="playing-card bg-slate-700/20 border-slate-700/50"></div>)}
                            </div>
                        </div>

                        <div className="relative h-8 flex items-center justify-center">
                             <div className="w-full h-px bg-slate-700/30"></div>
                             <div className="absolute px-3 py-0.5 bg-slate-800/40 rounded-full border border-white/5 text-[9px] font-black text-yellow-500/60 uppercase">W Table</div>
                        </div>

                        {/* Áé©ÂÆ∂ */}
                        <div>
                            <div className="flex justify-between items-center mb-3 px-2">
                                <span className="text-[9px] font-black text-slate-500 uppercase">Your Hand</span>
                                <span className="text-[10px] font-bold text-yellow-500">Score: {calculateScore(playerHand)}</span>
                            </div>
                            <div className="flex justify-center gap-2 flex-wrap min-h-[85px]">
                                {playerHand.map((card, i) => (
                                    <div key={i} className={`playing-card ${(card.suit === '‚ô•' || card.suit === '‚ô¶') ? 'text-rose-600' : 'text-slate-900'}`}>
                                        {card.value}{card.suit}
                                    </div>
                                ))}
                                {playerHand.length === 0 && [1,2].map(i => <div key={i} className="playing-card bg-slate-700/20 border-slate-700/50"></div>)}
                            </div>
                        </div>
                    </div>

                    {advice && (
                        <div className="bg-yellow-500/10 border border-yellow-500/20 p-3 rounded-xl flex items-center gap-3">
                            <Icon name="brain-circuit" className="text-yellow-500" size={18} />
                            <p className="text-xs font-black text-yellow-500 tracking-tight">{advice}</p>
                        </div>
                    )}

                    <div className="p-4 bg-black/40 rounded-xl border border-white/5 min-h-[70px] flex items-center justify-center text-center">
                        <p className={`text-sm font-bold italic leading-tight ${message.includes('‰∫îÂ∞èÈæç') ? 'five-card-charlie text-lg scale-110' : 'text-slate-300'}`}>
                            „Äå {message} „Äç
                        </p>
                    </div>

                    <div className="grid grid-cols-3 gap-2">
                        {gameState === 'idle' || gameState === 'ended' ? (
                            <>
                                <button onClick={startGame} className="col-span-2 py-4 bg-gradient-to-r from-yellow-500 to-amber-600 rounded-xl font-black text-white shadow-lg active:scale-95 transition-all text-base uppercase">
                                    ‰∏ãÊ≥® $10 ÁôºÁâå
                                </button>
                                <button onClick={resetSession} className="py-4 bg-slate-800 border border-slate-700 rounded-xl font-black text-slate-400 active:scale-95 transition-all text-xs uppercase">
                                    ÁµêÊùüÈõ¢Èñã
                                </button>
                            </>
                        ) : gameState === 'bankrupt' ? (
                            <button onClick={resetSession} className="col-span-3 py-5 bg-rose-600/20 border border-rose-600/50 rounded-xl font-black text-rose-500 active:scale-95 transition-all">
                                Á±åÁ¢ºËº∏ÂÖâ‰∫Ü... ÈáçÁΩÆ‰ºëÊÅØ
                            </button>
                        ) : (
                            <>
                                <button disabled={gameState !== 'playing'} onClick={hit} className="py-4 rounded-xl font-black text-white bg-indigo-600 shadow-lg active:scale-95 transition-all text-sm uppercase">
                                    Ë¶ÅÁâå
                                </button>
                                <button disabled={gameState !== 'playing' || playerHand.length > 2} onClick={doubleDown} className={`py-4 rounded-xl font-black text-white shadow-lg active:scale-95 transition-all text-sm uppercase ${playerHand.length === 2 ? 'bg-amber-600' : 'bg-slate-800 text-slate-600 opacity-50'}`}>
                                    Âä†ÂÄç
                                </button>
                                <button disabled={gameState !== 'playing'} onClick={stand} className="py-4 rounded-xl font-black text-white bg-rose-600 shadow-lg active:scale-95 transition-all text-sm uppercase">
                                    ÂÅúÁâå
                                </button>
                            </>
                        )}
                    </div>
                </div>
            );
        };

        const ItineraryApp = () => {
            const [activeTab, setActiveTab] = useState(0);
            const [currentTime, setCurrentTime] = useState(new Date());
            const currentYear = new Date().getFullYear();

            const itinerary = useMemo(() => [
                {
                    date: `${currentYear}-01-15`,
                    events: [
                        { id: 'd1e1', time: '16:00', icon: 'car', title: 'Ê©üÂ†¥Êé•ÈÄÅÂá∫Áôº', desc: 'Â∞àËªäÂâçÂæÄÊ°ÉÂúíÊ©üÂ†¥„ÄÇ', type: 'transport' },
                        { id: 'd1e2', time: '17:30', icon: 'utensils', title: 'Ê°ÉÂúíÊ©üÂ†¥ VIP ÂÆ§', desc: 'T1 Ëà™Âªà‰∫´ÂèóË≤¥Ë≥ìÂÆ§„ÄÇ', type: 'relax' },
                        { id: 'd1e3', time: '20:10', icon: 'plane', title: 'Ëµ∑È£õ NX615', desc: 'Ê°ÉÂúí T1 -> Êæ≥ÈñÄ„ÄÇ', type: 'flight', detail: '20:10 - 22:05' },
                        { id: 'd1e4', time: '22:05', icon: 'map-pin', title: 'ÊäµÈÅîÊæ≥ÈñÄ', desc: 'È†òÂèñË°åÊùéËàáÂÖ•Èóú„ÄÇ', type: 'arrival' },
                        { id: 'd1e5', time: '23:00', icon: 'hotel', title: 'ÂÖ•‰Ωè W Hotel', desc: 'ÂÖ•‰ΩèË∑ØÊ∞πÂüé W È£ØÂ∫ó„ÄÇ', type: 'hotel' },
                        { id: 'd1e6', time: '23:30', icon: 'sparkles', title: 'Ë≥≠Â†¥Ë©¶ÊâãÊ∞£', desc: 'ÊÑüÂèóÊæ≥ÈñÄ‰∏çÂ§úÂüéÈ≠ÖÂäõ„ÄÇ', type: 'casino' },
                    ]
                },
                {
                    date: `${currentYear}-01-16`,
                    events: [
                        { id: 'd2e1', time: '10:00', icon: 'sun', title: 'ÊÖµÊá∂Êó©Êô®', desc: '‰∫´ÂèóÈ£ØÂ∫óË®≠ÊñΩÊàñË£úÁú†„ÄÇ', type: 'relax' },
                        { id: 'd2e2', time: '12:00', icon: 'trophy', title: 'Áé•ÈæçËªí Á±≥ÂÖ∂ÊûóÂçàÈ§ê', desc: '‰∏ÄÊòüÁ±≥ÂÖ∂ÊûóÁ≤µËèúÈ•óÂÆ¥„ÄÇ', type: 'food' },
                        { id: 'd2e3', time: '14:30', icon: 'sparkles', title: 'Ë≥≠Â†¥Áà≠Èú∏ / Ëá™Áî±Ê¥ªÂãï', desc: 'Êé¢Á¥¢ÈáëÂÖâÂ§ßÈÅìÈ≠ÖÂäõ„ÄÇ', type: 'casino' },
                        { id: 'd2e4', time: '19:00', icon: 'moon', title: 'ÊôöÈ§ê & Êæ≥ÈñÄÂ§úÊôØ', desc: 'Ëá™Áî±Êé¢Á¥¢Ë∑ØÊ∞πÂ§úËâ≤„ÄÇ', type: 'relax' },
                    ]
                },
                {
                    date: `${currentYear}-01-17`,
                    events: [
                        { id: 'd3e1', time: '09:30', icon: 'hotel', title: 'ÈÄÄÊàø Checkout', desc: 'Êï¥ÁêÜÊà∞Âà©ÂìÅÊ∫ñÂÇôÂõûÂè∞„ÄÇ', type: 'hotel' },
                        { id: 'd3e2', time: '10:00', icon: 'car', title: 'ÂâçÂæÄÊæ≥ÈñÄÊ©üÂ†¥', desc: 'Â∞àËªäÊé•ÈÄÅËá≥Ê©üÂ†¥„ÄÇ', type: 'transport' },
                        { id: 'd3e3', time: '12:00', icon: 'plane', title: 'Ëµ∑È£õ NX612', desc: 'Êæ≥ÈñÄ -> Ê°ÉÂúí T1„ÄÇ', type: 'flight', detail: '12:00 - 13:40' },
                        { id: 'd3e4', time: '13:40', icon: 'map-pin', title: 'ÊäµÈÅîÂè∞ÁÅ£', desc: 'Ê≠°ËøéÂõûÂÆ∂„ÄÇ', type: 'arrival' },
                        { id: 'd3e5', time: '14:30', icon: 'car', title: 'Ê©üÂ†¥Êé•ÈÄÅ', desc: 'ËøîÂõûÊ∫´ÊöñÁöÑÂÆ∂„ÄÇ', type: 'transport' },
                    ]
                }
            ], [currentYear]);

            const [checklist, setChecklist] = useState([
                { id: 1, text: 'Ë≠∑ÁÖß (ÊïàÊúü6ÂÄãÊúà‰ª•‰∏ä)', checked: false, category: 'ÈáçË¶ÅË≠â‰ª∂' },
                { id: 2, text: 'Ê©üÁ•® / ÈÖíÂ∫óË®ÇÊàøÁ¢∫Ë™çÂñÆ', checked: false, category: 'ÈáçË¶ÅË≠â‰ª∂' },
                { id: 4, text: 'Ê∏ØÂπ£ / Êæ≥ÈñÄÂπ£ (ÁèæÈáë)', checked: false, category: 'Èå¢Ë≤°' },
                { id: 5, text: '‰ø°Áî®Âç° (Êµ∑Â§ñÂõûÈ•ãÈ´ò)', checked: false, category: 'Èå¢Ë≤°' },
                { id: 6, text: 'Á∂≤Âç° / ÈñãÈÄöÊº´ÈÅä', checked: false, category: 'ÈõªÂ≠êË®≠ÂÇô' },
                { id: 7, text: 'Ë°åÂãïÈõªÊ∫ê (ÊâãÊèê‰∏äÊ©ü)', checked: false, category: 'ÈõªÂ≠êË®≠ÂÇô' },
                { id: 8, text: 'ËΩâÊé•È†≠ (Êæ≥ÈñÄÁÇ∫Ëã±Âºè‰∏âËÖ≥)', checked: false, category: 'ÈõªÂ≠êË®≠ÂÇô' },
                { id: 9, text: 'Ê≠£ÂºèÊúçË£ù (Á±≥ÂÖ∂Êûó/Ë≥≠Â†¥)', checked: false, category: 'Ë°£Áâ©' },
                { id: 10, text: 'ÂÄã‰∫∫Â∏∏ÂÇôËó•ÂìÅ', checked: false, category: 'ÈõúÈ†Ö' },
                { id: 11, text: 'Èõ®ÂÖ∑ (Êë∫ÁñäÂÇò)', checked: false, category: 'ÈõúÈ†Ö' },
            ]);

            const toggleCheck = (id) => {
                setChecklist(prev => prev.map(item => item.id === id ? { ...item, checked: !item.checked } : item));
            };

            const getEventStatus = (dayDate, eventTime, nextEventTime) => {
                const [hours, minutes] = eventTime.split(':').map(Number);
                const eventStart = new Date(dayDate);
                eventStart.setHours(hours, minutes, 0);
                let eventEnd;
                if (nextEventTime) {
                    const [nHours, nMinutes] = nextEventTime.split(':').map(Number);
                    eventEnd = new Date(dayDate);
                    eventEnd.setHours(nHours, nMinutes, 0);
                } else {
                    eventEnd = new Date(eventStart.getTime() + 2 * 60 * 60 * 1000);
                }
                if (currentTime < eventStart) return 'FUTURE';
                if (currentTime >= eventStart && currentTime < eventEnd) return 'NOW';
                return 'PAST';
            };

            const tabs = [
                { id: 0, label: '1/15', title: 'ÂïüÁ®ã & Â•¢ËèØÂÖ•‰Ωè' },
                { id: 1, label: '1/16', title: 'Á±≥ÂÖ∂ÊûóÈ•óÂÆ¥ & Â®õÊ®Ç' },
                { id: 2, label: '1/17', title: 'ÊªøËºâËÄåÊ≠∏' },
                { id: 3, label: '21Èªû', title: 'Ë≥≠Â†¥È†êÊºîÔºöBANKROLL CONTROL' }, 
                { id: 4, label: 'Ê™¢Êü•Ë°®', title: 'Ë°åÂâçÊ∫ñÂÇôÊ∏ÖÂñÆ' },
            ];

            return (
                <div className="min-h-screen bg-slate-950 flex justify-center items-start pt-0 sm:pt-6 sm:pb-6 font-sans text-slate-100">
                    <div className="w-full max-w-md bg-slate-900 min-h-screen sm:min-h-[90vh] sm:rounded-[3rem] sm:border-[10px] sm:border-slate-800 shadow-2xl relative overflow-hidden pb-12 text-left">
                        
                        <header className="relative bg-gradient-to-br from-purple-900 via-indigo-900 to-slate-955 p-8 shadow-2xl sm:rounded-t-[2.5rem]">
                            <div className="absolute top-0 left-0 w-full h-full opacity-30 pointer-events-none overflow-hidden sm:rounded-t-[2.5rem]">
                                <div className="absolute top-[-10%] right-[-10%] w-64 h-64 bg-yellow-500 rounded-full blur-[80px]"></div>
                            </div>
                            <div className="relative z-10">
                                <div className="flex justify-between items-center mb-6">
                                    <span className="bg-white/10 px-4 py-1 rounded-full text-[10px] font-black tracking-[0.2em] text-yellow-400 border border-yellow-400/20 uppercase">MACAO VIP TRIP</span>
                                    <Icon name="crown" className="text-yellow-500" size={20} />
                                </div>
                                <h1 className="text-3xl font-black mb-1 text-white leading-tight">Êæ≥ÈñÄÂ•¢ËèØ‰πãÊóÖ</h1>
                                <p className="text-blue-300/80 text-xs font-bold uppercase tracking-widest mt-2 italic">W HOTEL MACAU EDITION</p>
                            </div>
                        </header>

                        <div className="sticky top-0 z-20 bg-slate-900/95 backdrop-blur-xl pt-5 px-3 shadow-xl overflow-x-auto no-scrollbar border-b border-white/5">
                            <div className="flex justify-between bg-slate-800/50 rounded-2xl p-1 mb-5 min-w-max">
                                {tabs.map((tab, index) => (
                                    <button key={index} onClick={() => setActiveTab(index)}
                                        className={`min-w-[75px] py-2.5 px-4 text-xs font-black rounded-xl transition-all duration-500 ${activeTab === index ? 'bg-gradient-to-r from-yellow-500 to-amber-600 text-white shadow-lg' : 'text-slate-500'}`}>
                                        {tab.label}
                                    </button>
                                ))}
                            </div>
                            <div className="px-2 pb-4">
                                <h2 className="text-xl font-black text-white italic tracking-tight">{tabs[activeTab].title}</h2>
                            </div>
                        </div>

                        <main className="px-5 pt-3 pb-24 text-left">
                            {activeTab < 3 && (
                                <div className="space-y-8 relative">
                                    <div className="absolute left-[17px] top-6 bottom-6 w-0.5 bg-slate-800"></div>
                                    {itinerary[activeTab].events.map((event, idx) => {
                                        const nextEvent = itinerary[activeTab].events[idx + 1];
                                        const status = getEventStatus(itinerary[activeTab].date, event.time, nextEvent?.time);
                                        const isNow = status === 'NOW';
                                        const isPast = status === 'PAST';
                                        const isNext = !isPast && !isNow && (idx === 0 || getEventStatus(itinerary[activeTab].date, itinerary[activeTab].events[idx-1].time, event.time) === 'PAST');

                                        return (
                                            <div key={event.id} className={`relative pl-12 transition-all duration-700 ${isPast ? 'opacity-30' : 'opacity-100'}`}>
                                                <div className={`absolute left-0 top-1.5 w-9 h-9 rounded-full flex items-center justify-center border-4 border-slate-900 z-10 transition-all ${isNow ? 'bg-yellow-500 text-slate-900 scale-125 glow-gold' : 'bg-slate-800 text-slate-500'}`}>
                                                    <Icon name={event.icon} size={16} />
                                                </div>
                                                <div className={`rounded-[1.5rem] p-5 border transition-all ${isNow ? 'bg-slate-800 border-yellow-500 shadow-xl' : 'bg-slate-800/40 border-slate-700/50'}`}>
                                                    <div className="flex justify-between items-start mb-3 text-left">
                                                        <div className="flex gap-2 items-center text-left">
                                                            <span className="text-[10px] font-black bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded-lg border border-blue-500/10 uppercase">{event.time}</span>
                                                            {isNow && <span className="text-[10px] bg-yellow-500 text-slate-950 px-2 py-0.5 rounded-lg font-black animate-pulse">LIVE</span>}
                                                            {isNext && <span className="text-[10px] bg-white/10 text-white px-2 py-0.5 rounded-lg font-bold">NEXT</span>}
                                                        </div>
                                                    </div>
                                                    <h3 className={`font-black text-lg mb-1 ${isNow ? 'text-yellow-400' : 'text-white'}`}>{event.title}</h3>
                                                    <p className="text-slate-400 text-sm leading-relaxed">{event.desc}</p>
                                                    {event.detail && (
                                                        <div className="mt-4 bg-black/40 rounded-2xl p-4 flex items-center justify-between">
                                                            <div className="text-center"><div className="text-[9px] text-slate-500 font-bold mb-1 uppercase">DEP</div><div className="text-sm font-black text-white">{event.detail.split(' - ')[0]}</div></div>
                                                            <Icon name="arrow-right" size={14} className="text-slate-700" />
                                                            <div className="text-center"><div className="text-[9px] text-slate-500 font-bold mb-1 uppercase">ARR</div><div className="text-sm font-black text-white">{event.detail.split(' - ')[1]}</div></div>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            )}

                            {activeTab === 3 && <BlackjackGame />}

                            {activeTab === 4 && (
                                <div className="space-y-6">
                                    {Object.entries(groupedChecklist).map(([category, items]) => (
                                        <div key={category} className="bg-slate-800/30 rounded-[2rem] border border-slate-700/50 overflow-hidden shadow-xl">
                                            <div className="bg-slate-800/80 p-5 border-b border-white/5 flex items-center gap-3"><Icon name="clipboard-check" className="text-yellow-500" size={18} /><h3 className="font-black text-white tracking-tight">{category}</h3></div>
                                            {items.map((item) => (
                                                <div key={item.id} onClick={() => toggleCheck(item.id)} className="p-5 flex items-center gap-5 cursor-pointer border-b border-white/5 hover:bg-white/5 active:bg-white/10 transition-all text-left">
                                                    <Icon name={item.checked ? "check-square" : "square"} size={26} className={item.checked ? "text-green-400" : "text-slate-600"} />
                                                    <span className={`text-sm font-bold transition-all duration-500 ${item.checked ? 'text-slate-600 line-through' : 'text-slate-200'}`}>{item.text}</span>
                                                </div>
                                            ))}
                                        </div>
                                    ))}
                                </div>
                            )}
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ItineraryApp />);
    </script>
</body>
</html>